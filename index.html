<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Birthday ATTA</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  
  <link rel="preload" as="image" href="machine.png">

  <link rel="stylesheet" href="style.css">
  
  <script src="script.js" defer></script>
</head>
<body>
  <audio id="birthday-song" src="birthday_song.mp3" preload="none"></audio>

  <img id="char-sprite" src="MAIN-CHAR1.png" style="display:none;" loading="lazy" alt="Main Player">
  <img id="cake-sprite" src="Pixel_arte_de_anivers√°rio___-removebg-preview-Photoroom.png" style="display:none;" loading="lazy" alt="Cake">

  <img id="gc1" src="char1.png" style="display:none;" loading="lazy" alt="Guest 1">
  <img id="gc2" src="char2.png" style="display:none;" loading="lazy" alt="Guest 2">
  <img id="gc3" src="char3.png" style="display:none;" loading="lazy" alt="Guest 3">
  <img id="gc4" src="char4.png" style="display:none;" loading="lazy" alt="Guest 4">
  <img id="gc5" src="char5.png" style="display:none;" loading="lazy" alt="Guest 5">
  <img id="gc6" src="char6.png" style="display:none;" loading="lazy" alt="Guest 6">

  <div id="bg-wrap">
    <div class="stone-bg"></div>
    <div class="stone-top"></div>
    <div class="vignette"></div>
    <div class="scanlines"></div>
  </div>
  <div id="confetti-layer"></div>
  <div class="flash-overlay" id="flash"></div>

  <div id="ticker">
    <span class="ticker-inner">‚ú¶ HAPPY BIRTHDAY ATTA ‚ú¶ &nbsp;&nbsp; üéÆ ACHIEVEMENT UNLOCKED: ANOTHER YEAR ‚ú¶ &nbsp;&nbsp; MAKE A WISH TO CELEBRATE ‚ú¶ &nbsp;&nbsp; YOU ARE MVP ‚ú¶ &nbsp;&nbsp; ‚òÖ WISHING YOU MAX HP AND ENDLESS XP ‚òÖ</span>
  </div>

  <div id="stage">
    <div id="countdown"><span class="count-number" id="count-display"></span></div>
    <div id="birthday-screen">
      <div class="top-row">
        <span class="star-burst">‚ú¶</span>
        <span class="star-burst" style="animation-delay:-.5s;color:#ff88ff;">‚òÖ</span>
        <span class="star-burst" style="animation-delay:-1s;color:#00ffdd;">‚ú¶</span>
      </div>
      <div class="hb-text-wrap">
        <div class="pixel-frame"><div class="pf-bl"></div><div class="pf-br"></div></div>
        <span class="hb-line1">HAPPY</span>
        <span class="hb-line2">BIRTHDAY</span>
        <span class="hb-line3">ATTA</span>
      </div>
      <div class="hearts-row">
        <span class="pixel-heart">‚ô•</span><span class="pixel-heart">‚ô•</span><span class="pixel-heart">‚ô•</span>
      </div>
      <div class="sub-tag">* LEVEL UP ¬∑ NEW YEAR UNLOCKED *</div>
      <button id="wish-btn" onclick="enterWishLevel()">‚ú® MAKE A WISH ‚ú®</button>
    </div>
  </div>

  <div id="wish-level">
    <div id="level-sky"></div>
    <canvas id="scene-canvas"></canvas>

    <div id="game-hud">
      <div class="hud-left">
        <div id="hud-lives">
          <span class="heart">‚ô•</span><span class="heart">‚ô•</span><span class="heart">‚ô•</span><span class="heart empty">‚ô•</span>
        </div>
        <div id="hud-coins">ü™ô x0</div>
      </div>
      <div class="hud-center">LEVEL UP</div>
      <div class="hud-right">PLAYER<br>ATTA</div>
    </div>

    <div id="intro-sign">
      <div class="machine-container">
        <div class="machine-content">
          <span class="sign-title">üëæ HOW TO PLAY</span>
          <div class="sign-divider"></div>
          <div class="sign-row"><div class="sign-icon">üéÇ</div><div class="sign-text">WALK RIGHT TO REACH THE <span class="highlight-pink">CAKE</span> AND MAKE A WISH!</div></div>
          <div class="sign-row"><div class="sign-icon">‚óÄ‚ñ∂</div><div class="sign-text">USE <span class="highlight-cyan">ARROW KEYS</span> OR <span class="highlight-cyan">D-PAD</span> TO MOVE</div></div>
          <div class="sign-row"><div class="sign-icon">üÖ∞Ô∏è</div><div class="sign-text">PRESS <span class="highlight-pink">UP / A BUTTON</span> TO JUMP PITS</div></div>
          <button class="sign-btn" onclick="closeIntroSign()">‚ñ∂ INSERT COIN</button>
        </div>
      </div>
    </div>

    <div id="fell-overlay">
      <div class="fell-title" id="fell-title">üíÄ OOPS!</div>
      <div class="fell-sub" id="fell-reason">YOU FELL INTO THE PIT!</div>
      <button class="fell-btn" onclick="retryAfterFall()">‚ñ∂ TRY AGAIN</button>
    </div>

    <div id="dialogue">
      <p>üéÇ YOU REACHED THE CAKE!<br>BLOW OUT THE CANDLES?</p>
      <div class="dlg-btns">
        <button class="dlg-btn" id="btn-yes" onclick="blowCandles()">YES!</button>
        <button class="dlg-btn" id="btn-no" onclick="closeDialogue()">NOT YET</button>
      </div>
    </div>
    
    <div id="fw-layer"></div>
    <div id="celeb-text"><span class="ct1"> WISH GRANTED! </span><span class="ct2">HAPPY BIRTHDAY ATTA!</span></div>

    <div id="rpg-card">
      <div class="rpg-inner">
        <div class="rpg-portrait-frame">
          <div class="portrait-bars">
             <div class="p-bar"><div class="p-bar-fill" style="height:70%"></div></div>
             <div class="p-bar"><div class="p-bar-fill blue" style="height:50%"></div></div>
          </div>
          <img src="MAIN-CHAR2.png" class="rpg-portrait-img" loading="lazy" alt="Player Portrait">
        </div>
        <div class="rpg-stats">
          <div class="rpg-label">NAME:</div>
          <div class="rpg-val-big">ATTA</div>
          <div class="rpg-label">STATUS:</div>
          <div class="rpg-val-sub">LEVEL UP!<br>BIRTHDAY GIRL</div>
          <div class="rpg-label" style="margin-top:4px;">COINS:</div>
          <div class="rpg-val-sub" id="final-coins">00</div>
        </div>
      </div>
      <div class="rpg-textbox">
        <div class="rpg-text-content">
          ATTA: *Yay!* <span>Congratulations!</span><br>Time to eat cake and celebrate!
        </div>
        <div class="rpg-arrow"></div>
      </div>
    </div>
  </div>

  <div id="mobile-controls">
    <div class="dpad-container">
      <div class="dpad-btn dpad-up" id="btn-up"></div>
      <div class="dpad-btn dpad-left" id="btn-left"></div>
      <div class="dpad-center"></div>
      <div class="dpad-btn dpad-right" id="btn-right"></div>
      <div class="dpad-btn dpad-down" id="btn-down"></div>
    </div>
    <div class="action-btns">
      <button class="act-btn btn-b" id="btn-b">B</button>
      <button class="act-btn btn-a" id="btn-a">A</button>
    </div>
  </div>
</body>
</html>
